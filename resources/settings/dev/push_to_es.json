
{
	"work_queue": {
		"name": "active-data-index-dev",
		"debug": true,
		"$ref": "file://~/private.json#aws_credentials"
	},
	"workers":[
		{
			"name": "unit",
			"batch_size": 5000,
			"skip": 0,
			"rollover_field": "build.date",
			"rollover_interval": "week",
			"sample_only": [
			],
			"elasticsearch": {
				"host": "http://localhost",
				"port": 9200,
				"index": "unittest",
				"type": "test_result",
				"timeout": 300,
				"consistency": "one",   // WE ONLY NEED ONE SHARD TO BE AVAILABLE
				"schema": {
					"$ref": "//../../schema/test_results.json"
				},
				"debug": false,
				"limit_replicas": false
			},
			"source": {
				"$ref": "file://~/private.json#aws_credentials",
				"bucket": "active-data-test-result-dev",
				"key_format": "t.a:b.c"
			}
		},
		{
			"name":"perf",
			"rollover_field": "build.date",
			"rollover_interval": "year",
			"batch_size": 1000,
			"queue_size": 2000,
			"sample_only": [],
			"elasticsearch": {
				"host": "http://localhost",
				"port": 9200,
				"index": "perf",
				"type": "perf_result",
				"timeout": 300,
				"consistency": "one",   // WE ONLY NEED ONE SHARD TO BE AVAILABLE
				"schema": {
					"$ref": "//../../schema/perf_results.json"
				},
				"debug": false,
				"limit_replicas": false
			},
			"source": {
				"bucket": "active-data-perf-dev",
				"$ref": "file://~/private.json#aws_credentials",
				"key_format": "t.a:b.c"
			}
		},
		{
			"name":"jobs",
			"rollover_field": "build.date",
			"rollover_interval": "3month",
			"batch_size": 500,
			"sample_only": [],
			"elasticsearch": {
				"host": "http://localhost",
				"port": 9200,
				"index": "jobs",
				"type": "job",
				"timeout": 300,
				"consistency": "one",   // WE ONLY NEED ONE SHARD TO BE AVAILABLE
				"schema": {
					"$ref": "//../../schema/jobs.json"
				},
				"debug": false,
				"limit_replicas": false
			},
			"source": {
				"bucket": "active-data-jobs-dev",
				"$ref": "file://~/private.json#aws_credentials",
				"key_format": "a.b"
			}
		},
		{
			"name":"code coverage",
			"queue_size": 2000,
			"batch_size": 1000,
			"rollover_field": "build.created_timestamp",
			"rollover_interval": "day",
			"sample_only": [],
			"elasticsearch": {
				"host": "http://localhost",
				"port": 9200,
				"index": "coverage",
				"type": "code_coverage",
				"consistency": "one",   // WE ONLY NEED ONE SHARD TO BE AVAILABLE
				"timeout": 300,
				"schema": {
					"$ref": "//../../schema/code_coverage.json"
				},
				"debug": false,
				"limit_replicas": false
			},
			"source": {
				"bucket": "active-data-codecoverage-dev",
				"$ref": "file://~/private.json#aws_credentials",
				"key_format": "t.a:b.c"
			}
		},
		{
			"name": "task",
			"queue_size": 2000,
			"batch_size": 1000,
			"rollover_field": "task.created",
			"rollover_interval": "3month",
			"sample_only": [],
			"elasticsearch": {
				"host": "http://localhost",
				"port": 9200,
				"index": "task",
				"type": "task",
				"timeout": 300,
				"consistency": "one",   // WE ONLY NEED ONE SHARD TO BE AVAILABLE
				"schema": {
					"$ref": "//../../schema/task_cluster.json"
				},
				"debug": false,
				"limit_replicas": false
			},
			"source": {
				"bucket": "active-data-task-cluster-normalized-dev",
				"$ref": "file://~/private.json#aws_credentials",
				"key_format": "t.a:b"
			}
		}
	],
	"constants": {
		"pyLibrary.env.http.default_headers": {
			"Referer": "https://wiki.mozilla.org/Auto-tools/Projects/ActiveData",
			"User-Agent": "ActiveData-ETL"
		}
	},
	"debug": {
		"trace":true,
		"log": [
			{
				"log_type": "console"
			},
			{
				"log_type": "ses",
				"from_address": "klahnakoski@mozilla.com",
				"to_address": "klahnakoski@mozilla.com",
				"subject": "[ALERT][DEV]Problem in Push to ES",
				"$ref": "file://~/private.json#aws_credentials"
			}
		]
	}
}

